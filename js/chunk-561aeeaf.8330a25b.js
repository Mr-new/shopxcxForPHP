(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-561aeeaf"],{"4d17":function(e,t,a){"use strict";var i=a("73b7"),o=a.n(i);o.a},"700d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 基本配置")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"170px"}},[a("el-form-item",{attrs:{label:"医院名称"}},[a("el-input",{attrs:{placeholder:"请输入医院名称"},model:{value:e.form.hospitalname,callback:function(t){e.$set(e.form,"hospitalname",t)},expression:"form.hospitalname"}})],1),a("el-form-item",{attrs:{label:"城市"}},[a("el-input",{attrs:{placeholder:"请输入医院所在城市"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})],1),a("el-form-item",{attrs:{label:"医院地址"}},[a("el-input",{attrs:{placeholder:"请输入医院地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),a("el-form-item",{attrs:{label:"地理纬度"}},[a("el-input",{attrs:{placeholder:"请输入医院地理纬度"},model:{value:e.form.lat,callback:function(t){e.$set(e.form,"lat",t)},expression:"form.lat"}})],1),a("el-form-item",{attrs:{label:"地理经度"}},[a("el-input",{attrs:{placeholder:"请输入医院地理经度"},model:{value:e.form.lng,callback:function(t){e.$set(e.form,"lng",t)},expression:"form.lng"}})],1),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),a("el-form-item",{attrs:{label:"营业时间"}},[a("el-input",{attrs:{placeholder:"请输入营业时间"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),a("el-form-item",{attrs:{label:"医院Logo"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{name:"image","with-credentials":"",data:{id:this.form.logo},action:e.uploadUrl(),"on-error":e.uploadError,"on-success":e.handleAvatarSuccess1,"before-upload":e.beforeAvatarUpload,"on-progress":e.uploading,"show-file-list":!1,"auto-upload":!0,enctype:"multipart/form-data"}},[e.form.logoImgUrl?a("img",{staticClass:"avatar",attrs:{src:e.form.logoImgUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("span",{staticStyle:{color:"red"}},[e._v("建议尺寸162*162")])],1),a("el-form-item",{attrs:{label:"团队图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{name:"image","with-credentials":"",data:{id:this.form.teamimg},action:e.uploadUrl(),"on-error":e.uploadError,"on-success":e.handleAvatarSuccess2,"before-upload":e.beforeAvatarUpload,"on-progress":e.uploading,"show-file-list":!1,"auto-upload":!0,enctype:"multipart/form-data"}},[e.form.teamImgUrl?a("img",{staticClass:"avatar",attrs:{src:e.form.teamImgUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("span",{staticStyle:{color:"red"}},[e._v("建议尺寸1125*459")])],1),a("el-form-item",{attrs:{label:"医院环境"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{name:"image","with-credentials":"",data:{id:this.form.hospitalimg},action:e.uploadUrl(),"on-error":e.uploadError,"on-success":e.handleAvatarSuccess3,"before-upload":e.beforeAvatarUpload,"on-progress":e.uploading,"show-file-list":!1,"auto-upload":!0,enctype:"multipart/form-data"}},[e.form.hospitalImgUrl?a("img",{staticClass:"avatar",attrs:{src:e.form.hospitalImgUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("span",{staticStyle:{color:"red"}},[e._v("建议尺寸1125*672")])],1),a("el-form-item",{attrs:{label:"每日签到赠送积分数量"}},[a("el-input",{attrs:{placeholder:"请输入每日签到赠送积分数量"},model:{value:e.form.integral,callback:function(t){e.$set(e.form,"integral",t)},expression:"form.integral"}})],1),a("el-form-item",{attrs:{label:"艺星详情"}},[a("quill-editor",{ref:"myTextEditor",staticStyle:{width:"1000px"},attrs:{options:e.editorOption},model:{value:e.form.yestardetails,callback:function(t){e.$set(e.form,"yestardetails",t)},expression:"form.yestardetails"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")])],1)],1)],1)])])},o=[],r=(a("fa26"),a("3040"),a("cac2"),a("1e58"),a("b881")),l=a("b049");r["Quill"].register("modules/ImageExtend",l["a"]);var s={name:"baseform",components:{quillEditor:r["quillEditor"]},data:function(){return{form:{id:"",hospitalname:"",logo:"",logoImgUrl:"",teamimg:"",teamImgUrl:"",hospitalimg:"",hospitalImgUrl:"",time:"",address:"",tel:"",lat:"",lng:"",city:"",integral:"",yestardetails:""},loading:!1,editorOption:{modules:{ImageExtend:{loading:!0,name:"image",action:this.$api.uploadUrl+"/Images/uploadEditorImage",response:function(e){return e.data}},toolbar:{container:l["c"],handlers:{image:function(){l["b"].emit(this.quill.id)}}}}}}},created:function(){this.getData()},methods:{onEditorChange:function(e){e.editor;var t=e.html;e.text;this.form.details=t},uploadUrl:function(){var e=this.$api.uploadUrl+"/Images/upload";return e},beforeAvatarUpload:function(e){console.log(e),this.loading=!0},uploading:function(e,t,a){},uploadError:function(e){this.$message.error(e.msg)},handleAvatarSuccess1:function(e,t){this.loading=!1,console.log(e),this.form.logo=e.data,this.form.logoImgUrl=URL.createObjectURL(t.raw),this.$message.success(e.msg)},handleAvatarSuccess2:function(e,t){this.loading=!1,console.log(e),this.form.teamimg=e.data,this.form.teamImgUrl=URL.createObjectURL(t.raw),this.$message.success(e.msg)},handleAvatarSuccess3:function(e,t){this.loading=!1,console.log(e),this.form.hospitalimg=e.data,this.form.hospitalImgUrl=URL.createObjectURL(t.raw),this.$message.success(e.msg)},getData:function(){var e=this;this.$api.post("ShopConfig/getConfig",null,function(t){e.form=t.data,console.log(t)},function(t){e.tableData=[],e.$message.error(t.msg)})},onSubmit:function(){var e=this,t=this.$qs.stringify({id:this.form.id,hospitalname:this.form.hospitalname,time:this.form.time,address:this.form.address,tel:this.form.tel,lat:this.form.lat,lng:this.form.lng,city:this.form.city,integral:this.form.integral,yestardetails:this.form.yestardetails});this.$api.post("ShopConfig/saveConfig",t,function(t){e.$message.success(t.msg),console.log(t)},function(t){e.tableData=[],e.$message.error(t.msg)})},escapeStringHTML:function(e){return e&&(e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&quot;/g,'"')),e},submit:function(){var e=this.escapeStringHTML(this.form.details);console.log(e)}}},n=s,c=(a("4d17"),a("17cc")),d=Object(c["a"])(n,i,o,!1,null,"24165689",null);t["default"]=d.exports},"73b7":function(e,t,a){},b049:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return o}),a.d(t,"c",function(){return l});const i={watcher:{},active:null,on:function(e,t){this.watcher[e]||(this.watcher[e]=t)},emit:function(e,t=1){this.active=this.watcher[e],1===t&&r()}};class o{constructor(e,t={}){this.id=Math.random(),this.quill=e,this.quill.id=this.id,this.config=t,this.file="",this.imgURL="",e.root.addEventListener("paste",this.pasteHandle.bind(this),!1),e.root.addEventListener("drop",this.dropHandle.bind(this),!1),e.root.addEventListener("dropover",function(e){e.preventDefault()},!1),this.cursorIndex=0,i.on(this.id,this)}pasteHandle(e){i.emit(this.quill.id,0);let t,a,o,r=e.clipboardData,l=0;if(r){if(t=r.items,!t)return;for(a=t[0],o=r.types||[];l<o.length;l++)if("Files"===o[l]){a=t[l];break}if(a&&"file"===a.kind&&a.type.match(/^image\//i)){this.file=a.getAsFile();let e=this;if(e.config.size&&e.file.size>=1024*e.config.size*1024)return void(e.config.sizeError&&e.config.sizeError());this.config.action}}}dropHandle(e){i.emit(this.quill.id,0);const t=this;e.preventDefault(),t.config.size&&t.file.size>=1024*t.config.size*1024?t.config.sizeError&&t.config.sizeError():(t.file=e.dataTransfer.files[0],this.config.action?t.uploadImg():t.toBase64())}toBase64(){const e=this,t=new FileReader;t.onload=(t=>{e.imgURL=t.target.result,e.insertImg()}),t.readAsDataURL(e.file)}uploadImg(){const e=this;e.quillLoading;let t=e.config,a=new FormData;a.append(t.name,e.file),t.editForm&&t.editForm(a);let o=new XMLHttpRequest;o.open("post",t.action,!0),t.headers&&t.headers(o),t.change&&t.change(o,a),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){let a=JSON.parse(o.responseText);e.imgURL=t.response(a),i.active.uploadSuccess(),e.insertImg(),e.config.success&&e.config.success()}else e.config.error&&e.config.error(),i.active.uploadError()},o.upload.onloadstart=function(e){i.active.uploading(),t.start&&t.start()},o.upload.onprogress=function(e){let t=(e.loaded/e.total*100|0)+"%";i.active.progress(t)},o.upload.onerror=function(e){i.active.uploadError(),t.error&&t.error()},o.upload.onloadend=function(e){t.end&&t.end()},o.send(a)}insertImg(){const e=i.active;e.quill.insertEmbed(i.active.cursorIndex,"image",e.imgURL),e.quill.update(),e.quill.setSelection(e.cursorIndex+1)}progress(e){e="[uploading"+e+"]",i.active.quill.root.innerHTML=i.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,e)}uploading(){let e=(i.active.quill.getSelection()||{}).index||i.active.quill.getLength();i.active.cursorIndex=e,i.active.quill.insertText(i.active.cursorIndex,"[uploading...]",{color:"red"},!0)}uploadError(){i.active.quill.root.innerHTML=i.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,"[upload error]")}uploadSuccess(){i.active.quill.root.innerHTML=i.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,"")}}function r(){let e=document.querySelector(".quill-image-input");null===e&&(e=document.createElement("input"),e.setAttribute("type","file"),e.classList.add("quill-image-input"),e.style.display="none",e.addEventListener("change",function(){let t=i.active;t.file=e.files[0],e.value="",t.config.size&&t.file.size>=1024*t.config.size*1024?t.config.sizeError&&t.config.sizeError():t.config.action?t.uploadImg():t.toBase64()}),document.body.appendChild(e)),e.click()}const l=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]}}]);